---
layout: post
title:  "Tickless 模式低功耗的原理和实现"
date:   2020-01-08 13:31:00 +0800
tags: [Tickless, 模式低, STM32, FreeRTOS]
---

一、概述
=============
&emsp;&emsp;在单片机的嵌入式操作系统上，传统的低功耗实现方法是在空闲任务中让 MCU 进入低功耗模式。然后通过系统心跳（System tick）以特定的周期唤醒。这种方法有一些缺点：MCU 消耗的能量取决于低功耗状态所占时间的比例。当系统心跳频率降低，单位时间内 MCU 的唤醒次数减少，能量消耗降低，但是定时精度降低。反之，当系统心跳频率升高，单位时间内 MCU 的唤醒次数增加，能量消耗提高，定时精度也随之提高。另外，为了保持系统心跳底层对应的硬件定时器的持续运行，MCU 往往不能进入某些功耗更低的模式。这导致 MCU 在休眠期间的工号也不能降到最低。

&emsp;&emsp;现代嵌入式操作系统中，大多都引入了“Tickless”的低功耗方案。顾名思义，此方案在系统的低功耗阶段关闭系统心跳，实现更低的能量消耗。本文以 FreeRTOS 为例，阐述了 Tickless 模式低功耗的原理。并且介绍了其在 STM32L476 单片机上的实现。
